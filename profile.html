{% extends "layout.html" %}
{% block title %}Profile - Smart Expense Tracker{% endblock %}

{% block content %}
<div class="form-card">
    <h2>Profile</h2>
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label>Username</label>
            <input type="text" name="username" value="{{ current_user.username }}">
        </div>

        <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" value="{{ current_user.email }}">
        </div>

        <div class="form-group">
            <label>Profile Picture</label>
            <input type="file" name="profile_pic" accept="image/*">
            {% if current_user.profile_pic %}
            <p>Current: <a href="{{ url_for('uploaded_file', filename=current_user.profile_pic) }}" target="_blank">View</a></p>
            {% endif %}
        </div>

        <div class="form-group">
            <label>Currency</label>
            <select name="currency">
                <option value="INR" {% if current_user.currency=='INR' %}selected{% endif %}>INR (₹)</option>
                <option value="USD" {% if current_user.currency=='USD' %}selected{% endif %}>USD ($)</option>
                <option value="EUR" {% if current_user.currency=='EUR' %}selected{% endif %}>EUR (€)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Language</label>
            <select name="language">
                <option value="en" {% if current_user.language=='en' %}selected{% endif %}>English</option>
                <option value="hi" {% if current_user.language=='hi' %}selected{% endif %}>Hindi</option>
            </select>
        </div>

        <div class="form-group">
            <label>Monthly Budget</label>
            <input type="number" step="0.01" name="monthly_budget" value="{{ current_user.monthly_budget or 0 }}">
        </div>

        <button type="submit" class="btn-submit">Save Profile</button>
    </form>

    <h3 style="margin-top: 30px;">Change Password</h3>
    <form method="POST" action="{{ url_for('change_password') }}">
        <div class="form-group">
            <label>Old Password</label>
            <input type="password" name="old_password" required>
        </div>
        <div class="form-group">
            <label>New Password</label>
            <input type="password" name="new_password" required>
        </div>
        <button type="submit" class="btn-submit">Change Password</button>
    </form>
</div>
{% endblock %}
